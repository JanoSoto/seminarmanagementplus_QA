<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/WEB-INF/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">
    
    <ui:define name="metadata">
        #{accordionPanelMB.setIndex("3")}
        #{accordionPanelMB.setListUser("seleccion")}
    </ui:define>
    
    <ui:define name="title"><title>Lista de Usuarios | Seminar Management</title></ui:define>

    <ui:define name="content">
        
        <h1>Usuarios</h1>
        <br/>
        <f:event type="preRenderView" listener="#{listarUsuariosMB.updateUsuarios()}" />
        <h:form>
            <p:dataTable id="userTable" var="user" value="#{listarUsuariosMB.usuarios}" filterDelay="100" paginator="true"
                         rows="10" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} 
                         {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="10,20,30,40,50"
                         emptyMessage="No se encontraron alumnos con el filtro seleccionado">
                <p:column headerText="Nombre/s" filterMatchMode="contains" filterBy="#{user.nombre}" sortBy="#{user.nombre}"> 
                    <h:outputText value="#{user.nombre}" />
                </p:column>
                
                <p:column headerText="Apellido/s" filterMatchMode="contains" filterBy="#{user.apellido}" sortBy="#{user.apellido}"> 
                    <h:outputText value="#{user.apellido}" />
                </p:column>
                
                <p:column headerText="Rut" filterMatchMode="contains" filterBy="#{user.rut}" sortBy="#{user.rut}">
                    <h:outputText value="#{user.rut}" />
                </p:column>
                
                <p:column headerText="Tipo" filterMatchMode="contains" filterBy="#{user.tipo}" sortBy="#{user.tipo}">
                    <h:outputText value="#{user.tipo}" />
                </p:column>
                
                <p:column headerText="¿Está activo?" filterMatchMode="contains" filterBy="#{user.activo}" sortBy="#{user.activo}">
                    <h:outputText value="#{user.activo}" />
                </p:column>
                
                <p:column style="width:4%;text-align: center">
                    <!--Falta hacer que no sea editable si es el mismo usuario-->
                    <p:button icon="ui-icon-search" title="Ver Datos" iconPos="right" href="../ver/usuario.xhtml?user=#{user.rut}"/>
                </p:column>        
            </p:dataTable>
        </h:form>

    </ui:define>

</ui:composition>